// 2025-12-05 – Lines App – Prisma Schema
//
// Complete database schema based on docs/DATA_MODEL.md
// Derived from information/lines-mvp-information-v1.md
// + Auth models (NextAuth.js v5 / Auth.js)

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")
}

generator client {
  provider = "prisma-client-js"
}

// ============================================================================
// AUTHENTICATION & USERS (NextAuth.js v5)
// ============================================================================

model User {
  id            String    @id @default(cuid())
  name          String?
  email         String    @unique
  emailVerified DateTime?
  image         String?
  password      String? // For credentials provider
  role          String    @default("user") // user | admin
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  // Relationships
  accounts           Account[]
  sessions           Session[]
  venues             Venue[]
  floorPlanTemplates FloorPlanTemplate[]

  @@map("users")
}

model Account {
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@id([provider, providerAccountId])
  @@map("accounts")
}

model Session {
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("sessions")
}

model VerificationToken {
  identifier String
  token      String
  expires    DateTime

  @@id([identifier, token])
  @@map("verification_tokens")
}

// ============================================================================
// VENUE & DETAILS
// ============================================================================

model Venue {
  id         String   @id @default(cuid())
  name       String
  userId     String // Owner of the venue
  layoutData Json? // Overall floor plan dimensions, scale, grid settings
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Relationships
  user                User                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  details             VenueDetails?
  menus               Menu[]
  zones               Zone[]
  lines               Line[]
  occurrences         LineOccurrence[]
  areas               VenueArea[]
  reservationSettings ReservationSettings?
  floorPlanTemplates  FloorPlanTemplate[]
  roles               Role[]
  floorPlans          FloorPlan[]

  @@index([userId])
  @@map("venues")
}

model VenueDetails {
  id       String  @id @default(cuid())
  venueId  String  @unique
  phone    String?
  email    String?
  address  String?
  currency String? @default("ILS") // ILS, USD, GBP, EUR

  // Relationships
  venue Venue @relation(fields: [venueId], references: [id], onDelete: Cascade)

  @@map("venue_details")
}

// ============================================================================
// MENUS
// ============================================================================

model Menu {
  id         String   @id @default(cuid())
  venueId    String
  name       String
  fileName   String
  fileType   String
  fileSize   Int
  fileData   String?  @db.Text
  uploadedAt DateTime @default(now())
  updatedAt  DateTime @updatedAt

  // Relationships
  venue Venue @relation(fields: [venueId], references: [id], onDelete: Cascade)

  @@index([venueId])
  @@map("menus")
}

// ============================================================================
// FLOOR PLANS
// ============================================================================

model FloorPlan {
  id          String   @id @default(cuid())
  venueId     String   @map("venue_id")
  name        String
  description String?
  isDefault   Boolean  @default(false) @map("is_default")
  isLocked    Boolean  @default(false) @map("is_locked")
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  // Relationships
  venue             Venue                       @relation(fields: [venueId], references: [id], onDelete: Cascade)
  zones             Zone[]
  venueAreas        VenueArea[]
  lines             Line[] // Lines using this floor plan (1:1 relationship)
  customOccurrences LineOccurrence[]            @relation("CustomFloorPlan")
  lineStaffing      LineFloorPlanStaffing[]
  lineMinimumOrders LineFloorPlanMinimumOrder[]

  @@index([venueId])
  @@index([venueId, isDefault])
  @@map("floor_plans")
}

// ============================================================================
// SEATING: ZONES & TABLES
// ============================================================================

model Zone {
  id               String   @id @default(cuid())
  venueId          String
  floorPlanId      String?  @map("floor_plan_id")
  name             String
  color            String
  description      String?
  // Visual layout properties
  positionX        Decimal? @db.Decimal(10, 2)
  positionY        Decimal? @db.Decimal(10, 2)
  width            Decimal? @db.Decimal(10, 2)
  height           Decimal? @db.Decimal(10, 2)
  shape            String?  @default("rectangle") // rectangle, circle, polygon
  polygonPoints    Json? // For custom polygon shapes
  // Content settings
  zoneNumber       Int?     @map("zone_number")
  zoneType         String?  @default("seating") @map("zone_type") // seating, bar, kitchen
  isKitchen        Boolean  @default(false) @map("is_kitchen")
  // Bar-specific fields
  barNumber        Int?     @map("bar_number")
  barName          String?  @map("bar_name")
  barSeats         Int?     @map("bar_seats")
  barMinimumPrice  Decimal? @db.Decimal(10, 2) @map("bar_minimum_price") // מינימום הזמנה לבר
  // Staffing
  staffingRules    Json?    @map("staffing_rules") // { roleId: string, managers: number, employees: number }[]
  // Pricing
  zoneMinimumPrice Decimal? @db.Decimal(10, 2) // מינימום הזמנה לאיזור
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  // Relationships
  venue                       Venue                        @relation(fields: [venueId], references: [id], onDelete: Cascade)
  floorPlan                   FloorPlan?                   @relation(fields: [floorPlanId], references: [id], onDelete: Cascade)
  tables                      Table[]
  lineStaffing                LineFloorPlanStaffing[]
  occurrenceStaffing          LineOccurrenceStaffing[]
  lineFloorPlanMinimumOrders  LineFloorPlanMinimumOrder[]
  lineOccurrenceMinimumOrders LineOccurrenceMinimumOrder[]

  @@index([venueId])
  @@index([floorPlanId])
  @@index([venueId, positionX, positionY])
  @@map("zones")
}

model Table {
  id            String   @id @default(cuid())
  zoneId        String
  name          String
  seats         Int?
  notes         String?
  // Visual layout properties
  positionX     Decimal? @db.Decimal(10, 2)
  positionY     Decimal? @db.Decimal(10, 2)
  width         Decimal? @db.Decimal(10, 2)
  height        Decimal? @db.Decimal(10, 2)
  rotation      Decimal? @default(0) @db.Decimal(5, 2) // Rotation in degrees
  shape         String?  @default("rectangle") // rectangle, circle, oval, square
  tableType     String?  @default("table") // table, bar, counter
  // Pricing and numbering
  tableNumber   Int? // מספר שולחן (uses existing tableNumber column)
  minimumPrice  Decimal? @db.Decimal(10, 2) // מינימום הזמנה לשולחן
  // Staffing
  staffingRules Json?    @map("staffing_rules") // { roleId: count }[]
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  // Relationships
  zone                    Zone                         @relation(fields: [zoneId], references: [id], onDelete: Cascade)
  lineStaffing            LineFloorPlanStaffing[]
  lineMinimumOrders       LineFloorPlanMinimumOrder[]
  occurrenceStaffing      LineOccurrenceStaffing[]
  occurrenceMinimumOrders LineOccurrenceMinimumOrder[]

  @@index([zoneId])
  @@index([zoneId, positionX, positionY])
  @@map("tables")
}

// ============================================================================
// LINES & OCCURRENCES
// ============================================================================

model Line {
  id          String   @id @default(cuid())
  venueId     String
  floorPlanId String?  @map("floor_plan_id") // Single floor plan per line (1:1)
  name        String
  days        Int[]
  startTime   String
  endTime     String
  frequency   String // Enum: weekly, monthly, variable, oneTime
  color       String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relationships
  venue                 Venue                              @relation(fields: [venueId], references: [id], onDelete: Cascade)
  floorPlan             FloorPlan?                         @relation(fields: [floorPlanId], references: [id], onDelete: SetNull)
  occurrences           LineOccurrence[]
  reservationExclusions ReservationSettingsLineExclusion[]
  reservationSettings   LineReservationSettings?
  lineStaffing          LineFloorPlanStaffing[]
  lineMinimumOrders     LineFloorPlanMinimumOrder[]

  @@index([venueId])
  @@index([venueId, color])
  @@index([floorPlanId])
  @@map("lines")
}

model LineOccurrence {
  id                String   @id @default(cuid())
  lineId            String
  venueId           String
  customFloorPlanId String?  @map("custom_floor_plan_id") // Optional custom floor plan for this event
  date              String
  startTime         String
  endTime           String
  isExpected        Boolean  @default(true)
  isActive          Boolean  @default(true)
  title             String?
  subtitle          String?
  description       String?  @db.Text
  location          String?
  contact           String?
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // Relationships
  line                    Line                         @relation(fields: [lineId], references: [id], onDelete: Cascade)
  venue                   Venue                        @relation(fields: [venueId], references: [id], onDelete: Cascade)
  customFloorPlan         FloorPlan?                   @relation("CustomFloorPlan", fields: [customFloorPlanId], references: [id], onDelete: SetNull)
  occurrenceStaffing      LineOccurrenceStaffing[]
  occurrenceMinimumOrders LineOccurrenceMinimumOrder[]

  @@unique([lineId, date])
  @@index([venueId])
  @@index([lineId])
  @@index([date])
  @@index([customFloorPlanId])
  @@map("line_occurrences")
}

// ============================================================================
// VENUE AREAS (Special areas: entrances, exits, kitchen, restrooms, etc.)
// ============================================================================

model VenueArea {
  id          String   @id @default(cuid())
  venueId     String
  floorPlanId String?  @map("floor_plan_id")
  areaType    String // entrance, exit, kitchen, restroom, dj_booth, stage, storage, bar, etc.
  name        String
  positionX   Decimal  @db.Decimal(10, 2)
  positionY   Decimal  @db.Decimal(10, 2)
  width       Decimal  @db.Decimal(10, 2)
  height      Decimal  @db.Decimal(10, 2)
  rotation    Decimal? @default(0) @db.Decimal(5, 2)
  shape       String?  @default("rectangle")
  icon        String? // Icon identifier for UI
  color       String? // Hex color
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relationships
  venue     Venue      @relation(fields: [venueId], references: [id], onDelete: Cascade)
  floorPlan FloorPlan? @relation(fields: [floorPlanId], references: [id], onDelete: Cascade)

  @@index([venueId])
  @@index([floorPlanId])
  @@map("venue_areas")
}

// ============================================================================
// RESERVATION SETTINGS
// ============================================================================

model ReservationSettings {
  id                     String   @id @default(cuid())
  venueId                String   @unique @map("venue_id")
  acceptsReservations    Boolean  @default(false) @map("accepts_reservations") // האם מקבל הזמנות
  allowPersonalLink      Boolean  @default(false) @map("allow_personal_link") // האם מאפשר הזמנה דרך לינק אישי
  requireApproval        Boolean  @default(false) @map("require_approval") // אם מאפשר לינק אישי, האם צריך לאשר
  manualRegistrationOnly Boolean  @default(true) @map("manual_registration_only") // אם לא לינק אישי, רישום ידני בלבד
  manageWaitlist         Boolean  @default(false) @map("manage_waitlist") // האם לנהל רשימת המתנה
  createdAt              DateTime @default(now()) @map("created_at")
  updatedAt              DateTime @updatedAt @map("updated_at")

  // Relationships
  venue         Venue                              @relation(fields: [venueId], references: [id], onDelete: Cascade)
  excludedLines ReservationSettingsLineExclusion[]
  daySchedules  ReservationSettingsDaySchedule[]
  formFields    ReservationFormField[]
  formDesign    ReservationFormDesign?

  @@index([venueId])
  @@map("reservation_settings")
}

// ============================================================================
// FLOOR PLAN TEMPLATES (Custom user templates)
// ============================================================================

model FloorPlanTemplate {
  id              String   @id @default(cuid())
  userId          String // Owner of the template
  venueId         String? // Optional: template can be venue-specific or global
  name            String
  description     String?
  elements        Json // Array of FloorPlanElement objects
  defaultCapacity Int?     @default(0)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  // Relationships
  user  User   @relation(fields: [userId], references: [id], onDelete: Cascade)
  venue Venue? @relation(fields: [venueId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([venueId])
  @@map("floor_plan_templates")
}

model ReservationSettingsLineExclusion {
  id                    String   @id @default(cuid())
  reservationSettingsId String   @map("reservation_settings_id")
  lineId                String   @map("line_id")
  createdAt             DateTime @default(now()) @map("created_at")

  // Relationships
  reservationSettings ReservationSettings @relation(fields: [reservationSettingsId], references: [id], onDelete: Cascade)
  line                Line                @relation(fields: [lineId], references: [id], onDelete: Cascade)

  @@unique([reservationSettingsId, lineId])
  @@index([reservationSettingsId])
  @@index([lineId])
  @@map("reservation_settings_line_exclusions")
}

model ReservationSettingsDaySchedule {
  id                    String   @id @default(cuid())
  reservationSettingsId String   @map("reservation_settings_id")
  dayOfWeek             Int      @map("day_of_week") // 0=Sunday, 1=Monday, ..., 6=Saturday
  startTime             String   @map("start_time") // HH:MM format (24-hour)
  endTime               String   @map("end_time") // HH:MM format (24-hour)
  intervalMinutes       Int?     @map("interval_minutes") // מרווחים בדקות (אופציונלי)
  customerMessage       String?  @map("customer_message") @db.Text // טקסט חופשי שיוצג ללקוח
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relationships
  reservationSettings ReservationSettings @relation(fields: [reservationSettingsId], references: [id], onDelete: Cascade)

  @@unique([reservationSettingsId, dayOfWeek])
  @@index([reservationSettingsId])
  @@map("reservation_settings_day_schedules")
}

// ============================================================================
// RESERVATION FORM FIELDS & DESIGN
// ============================================================================

model ReservationFormField {
  id                    String   @id @default(cuid())
  reservationSettingsId String   @map("reservation_settings_id")
  fieldType             String   @map("field_type") // "name", "email", "phone", "custom"
  fieldKey              String   @map("field_key") // Unique key for the field (e.g., "name", "email", "custom_1")
  label                 String // Display label (e.g., "שם מלא", "אימייל")
  placeholder           String? // Placeholder text
  isRequired            Boolean  @default(false) @map("is_required")
  isEnabled             Boolean  @default(true) @map("is_enabled")
  order                 Int      @default(0) // Display order
  validationRules       Json?    @map("validation_rules") // JSON: { minLength, maxLength, pattern, etc. }
  options               Json? // For select/radio fields: array of { value, label }
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relationships
  reservationSettings ReservationSettings @relation(fields: [reservationSettingsId], references: [id], onDelete: Cascade)

  @@index([reservationSettingsId])
  @@index([reservationSettingsId, order])
  @@map("reservation_form_fields")
}

model ReservationFormDesign {
  id                    String   @id @default(cuid())
  reservationSettingsId String   @unique @map("reservation_settings_id")
  primaryColor          String   @default("#3B82F6") @map("primary_color")
  secondaryColor        String?  @map("secondary_color")
  backgroundColor       String   @default("#FFFFFF") @map("background_color")
  textColor             String   @default("#000000") @map("text_color")
  buttonColor           String?  @map("button_color")
  buttonTextColor       String?  @map("button_text_color")
  borderRadius          String   @default("8px") @map("border_radius")
  fontFamily            String?  @map("font_family")
  headerText            String?  @map("header_text")
  footerText            String?  @map("footer_text")
  logoUrl               String?  @map("logo_url")
  createdAt             DateTime @default(now()) @map("created_at")
  updatedAt             DateTime @updatedAt @map("updated_at")

  // Relationships
  reservationSettings ReservationSettings @relation(fields: [reservationSettingsId], references: [id], onDelete: Cascade)

  @@index([reservationSettingsId])
  @@map("reservation_form_design")
}

// ============================================================================
// LINE RESERVATION SETTINGS (Per-Line Reservation Configuration)
// ============================================================================

model LineReservationSettings {
  id                String   @id @default(cuid())
  lineId            String   @unique @map("line_id")
  allowPersonalLink Boolean  @default(false) @map("allow_personal_link")
  requireApproval   Boolean  @default(false) @map("require_approval")
  manageWaitlist    Boolean  @default(false) @map("manage_waitlist")
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")

  // Relationships
  line         Line                         @relation(fields: [lineId], references: [id], onDelete: Cascade)
  daySchedules LineReservationDaySchedule[]

  @@index([lineId])
  @@map("line_reservation_settings")
}

model LineReservationDaySchedule {
  id                        String   @id @default(cuid())
  lineReservationSettingsId String   @map("line_reservation_settings_id")
  dayOfWeek                 Int      @map("day_of_week") // 0=Sunday, 1=Monday, ..., 6=Saturday
  startTime                 String   @map("start_time") // HH:MM format (24-hour)
  endTime                   String   @map("end_time") // HH:MM format (24-hour)
  intervalMinutes           Int?     @map("interval_minutes")
  customerMessage           String?  @map("customer_message") @db.Text
  createdAt                 DateTime @default(now()) @map("created_at")
  updatedAt                 DateTime @updatedAt @map("updated_at")

  // Relationships
  lineReservationSettings LineReservationSettings @relation(fields: [lineReservationSettingsId], references: [id], onDelete: Cascade)

  @@unique([lineReservationSettingsId, dayOfWeek])
  @@index([lineReservationSettingsId])
  @@map("line_reservation_day_schedules")
}

// ============================================================================
// ROLES & HIERARCHY
// ============================================================================

model Role {
  id                 String   @id @default(cuid())
  venueId            String
  name               String
  description        String?
  icon               String?
  color              String
  parentRoleId       String?  @map("parent_role_id")
  managerRoleId      String?  @map("manager_role_id") // Role that manages this role (for family tree hierarchy)
  order              Int      @default(0)
  isActive           Boolean  @default(true) @map("is_active")
  requiresManagement Boolean  @default(false) @map("requires_management")
  isManagementRole   Boolean  @default(false) @map("is_management_role")
  managedRoleId      String?  @unique @map("managed_role_id")
  requiresStaffing   Boolean  @default(false) @map("requires_staffing") // Does this role need staffing assignment?
  canManage          Boolean  @default(false) @map("can_manage") // Can this role have managers?
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  // Relationships
  venue          Venue  @relation(fields: [venueId], references: [id], onDelete: Cascade)
  parentRole     Role?  @relation("RoleHierarchy", fields: [parentRoleId], references: [id], onDelete: SetNull)
  childRoles     Role[] @relation("RoleHierarchy")
  managedRole    Role?  @relation("RoleManagement", fields: [managedRoleId], references: [id], onDelete: Cascade)
  managementRole Role?  @relation("RoleManagement")
  managerRole    Role?  @relation("RoleManager", fields: [managerRoleId], references: [id], onDelete: SetNull) // Manager of this role
  managedRoles   Role[] @relation("RoleManager") // Roles managed by this role

  @@index([venueId])
  @@index([parentRoleId])
  @@index([managerRoleId])
  @@index([managedRoleId])
  @@map("roles")
}

// ============================================================================
// LINE FLOOR PLAN STAFFING & MINIMUM ORDER
// ============================================================================

// Staffing rules specific to a Line + FloorPlan combination
model LineFloorPlanStaffing {
  id            String   @id @default(cuid())
  lineId        String   @map("line_id")
  floorPlanId   String   @map("floor_plan_id")
  zoneId        String?  @map("zone_id") // null = default for all zones in floor plan
  tableId       String?  @map("table_id") // null = default for all tables in zone
  staffingRules Json     @map("staffing_rules") // { roleId: count }[]
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  // Relationships
  line      Line      @relation(fields: [lineId], references: [id], onDelete: Cascade)
  floorPlan FloorPlan @relation(fields: [floorPlanId], references: [id], onDelete: Cascade)
  zone      Zone?     @relation(fields: [zoneId], references: [id], onDelete: Cascade)
  table     Table?    @relation(fields: [tableId], references: [id], onDelete: Cascade)

  @@unique([lineId, floorPlanId, zoneId, tableId])
  @@index([lineId, floorPlanId])
  @@index([zoneId])
  @@index([tableId])
  @@map("line_floor_plan_staffing")
}

// Minimum order amounts specific to a Line + FloorPlan combination
model LineFloorPlanMinimumOrder {
  id           String   @id @default(cuid())
  lineId       String   @map("line_id")
  floorPlanId  String   @map("floor_plan_id")
  zoneId       String?  @map("zone_id") // null = default for all zones in floor plan
  tableId      String?  @map("table_id") // null = default for all tables in zone
  minimumPrice Decimal  @map("minimum_price") @db.Decimal(10, 2)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // Relationships
  line      Line      @relation(fields: [lineId], references: [id], onDelete: Cascade)
  floorPlan FloorPlan @relation(fields: [floorPlanId], references: [id], onDelete: Cascade)
  zone      Zone?     @relation(fields: [zoneId], references: [id], onDelete: Cascade)
  table     Table?    @relation(fields: [tableId], references: [id], onDelete: Cascade)

  @@unique([lineId, floorPlanId, zoneId, tableId])
  @@index([lineId, floorPlanId])
  @@index([zoneId])
  @@index([tableId])
  @@map("line_floor_plan_minimum_orders")
}

// ============================================================================
// LINE OCCURRENCE STAFFING & MINIMUM ORDER (Event-specific overrides)
// ============================================================================

// Staffing rules specific to a LineOccurrence (event override)
model LineOccurrenceStaffing {
  id            String   @id @default(cuid())
  occurrenceId  String   @map("occurrence_id")
  zoneId        String?  @map("zone_id") // null = default for all zones
  tableId       String?  @map("table_id") // null = default for all tables in zone
  staffingRules Json     @map("staffing_rules") // { roleId: count }[]
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  // Relationships
  occurrence LineOccurrence @relation(fields: [occurrenceId], references: [id], onDelete: Cascade)
  zone       Zone?          @relation(fields: [zoneId], references: [id], onDelete: Cascade)
  table      Table?         @relation(fields: [tableId], references: [id], onDelete: Cascade)

  @@unique([occurrenceId, zoneId, tableId])
  @@index([occurrenceId])
  @@index([zoneId])
  @@index([tableId])
  @@map("line_occurrence_staffing")
}

// Minimum order amounts specific to a LineOccurrence (event override)
model LineOccurrenceMinimumOrder {
  id           String   @id @default(cuid())
  occurrenceId String   @map("occurrence_id")
  zoneId       String?  @map("zone_id") // null = default for all zones
  tableId      String?  @map("table_id") // null = default for all tables in zone
  minimumPrice Decimal  @map("minimum_price") @db.Decimal(10, 2)
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  // Relationships
  occurrence LineOccurrence @relation(fields: [occurrenceId], references: [id], onDelete: Cascade)
  zone       Zone?          @relation(fields: [zoneId], references: [id], onDelete: Cascade)
  table      Table?         @relation(fields: [tableId], references: [id], onDelete: Cascade)

  @@unique([occurrenceId, zoneId, tableId])
  @@index([occurrenceId])
  @@index([zoneId])
  @@index([tableId])
  @@map("line_occurrence_minimum_orders")
}
